<%= render 'layouts/errors', obj: @meal %>
<%= form_with model: @meal, url: public_meal_path, local: true, method: :patch do |f| %>
<div class="meal-recods-container py-10">
  <div class="meal w-100 mx-auto">
    <div class="meal-body">
      <div class="row">
        <div class="col-12">
          <div class="d-flex">
            <% if current_customer %>
              <%= link_to public_customer_path(current_customer), class: "profile-link" do %>
                <%= image_tag current_customer.get_profile_image, size:'40x40', class: "rounded-circle" %>
              <% end %>
              <div class="card-title mt-2">
                <%= current_customer.name %>
              </div>
            <% end %>
          </div>
          <div class="d-flex ml-4">
            <p class="meal-text col-6 mb-2">
              <%= f.text_area :body, value: @meal.body, class: "form-control", style: "height: 150px;" %>
            </p>
          </div>
        </div>
      </div>

      <% if @meal.image.attached? %>
        <div class="row">
          <div class="d-flex ml-4">
            <div class="col-8 ml-3">
              <%= image_tag @meal.image, class: "card-img-top img-fluid" %>
              <%= f.file_field :image %>
            </div>
          </div>
        </div>
      <% else %>
        <div class="row">
          <div class="d-flex ml-4">
            <div class="col-8 ml-3">
               <%= f.file_field :image %>
            </div>
          </div>
        </div>
      <% end %>

      <div class="col-12 ml-4 mt-4">
        <table class="table table-bordered" style="width: 500px;">
          <tr>
            <td><%= f.label :カテゴリ %><%= f.text_field :category, value: @meal.category %></td>
            <td><%= f.label :食事概要 %><%= f.text_field :meal_summary, value: @meal.meal_summary %></td>
            <td><%= f.label :食べた物 %><%= f.text_field :eat_meal, value: @meal.eat_meal %></td>
            <td><%= f.label :kcal %><%= f.text_field :kcal, value: @meal.kcal %></td>
          </tr>
        </table>
      </div>
        <div class="form-group">
          <%= f.submit '変更する', class: 'btn btn-success' %>
        </div>
        <% end %>
    </div>
  </div>
</div>


<style>
  .card-img-top {
    border-radius: 20px;
    max-width: 95%;
    max-height: 100%;
    object-fit: contain;
  }
</style>